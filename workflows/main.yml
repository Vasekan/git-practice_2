name: Simple CI

# üîπ –ó–∞–ø—É—Å–∫–∞–µ–º CI –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ push, –Ω–æ –∏ –ø—Ä–∏ pull_request (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ PR)
on:
  push:
    branches: [ main, development, release ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Say Hello
        run: echo "Hello CI!"
        
      - name: Simple test
        run: |
          python -c "
          from math_operations import add_numbers
          
          # –¢–µ—Å—Ç 1
          result1 = add_numbers(2, 3)
          print(f'2 + 3 = {result1}')
          assert result1 == 5, '–û—à–∏–±–∫–∞: 2+3 –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 5'
          
          # –¢–µ—Å—Ç 2
          result2 = add_numbers(10, 5)
          print(f'10 + 5 = {result2}')
          assert result2 == 15, '–û—à–∏–±–∫–∞: 10+5 –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 15'
          
          print('‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–π–¥–µ–Ω—ã!')
          "

      - name: Generate auto-docs
        if: github.ref == 'refs/heads/main'
        run: |
          echo "üìã –°–æ–∑–¥–∞—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é..."
          
          # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è docs –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
          mkdir -p docs
          
          # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ—Å—Ç–æ–π README —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–µ–∫—Ç–µ
          echo "# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" > docs/AUTO_GENERATED.md
          echo "" >> docs/AUTO_GENERATED.md
          echo "**–î–∞—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:** $(date)" >> docs/AUTO_GENERATED.md
          echo "**–ö–æ–º–º–∏—Ç:** ${{ github.sha }}" >> docs/AUTO_GENERATED.md
          echo "**–í–µ—Ç–∫–∞:** ${{ github.ref }}" >> docs/AUTO_GENERATED.md
          echo "" >> docs/AUTO_GENERATED.md
          echo "## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤" >> docs/AUTO_GENERATED.md
          echo "–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ! ‚úÖ" >> docs/AUTO_GENERATED.md
          echo "" >> docs/AUTO_GENERATED.md
          echo "## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞" >> docs/AUTO_GENERATED.md
          echo '```' >> docs/AUTO_GENERATED.md
          ls -la >> docs/AUTO_GENERATED.md
          echo '```' >> docs/AUTO_GENERATED.md
          
          echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: docs/AUTO_GENERATED.md"
          
      - name: Save docs as artifact
        if: github.ref == 'refs/heads/main'
        uses: actions/upload-artifact@v4
        with:
          name: auto-documentation
          path: docs/AUTO_GENERATED.md